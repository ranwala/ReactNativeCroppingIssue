//
//  RNProxyDelegate.m
//  RNScanbotSDK
//
//  Created by Marco Saia on 29.03.23.
//

#import "RNProxyDelegate.h"

@implementation RNProxyDelegate {
    RCTPromiseResolveBlock resolveBlock;
    RCTPromiseRejectBlock rejectBlock;
    RNProxyDelegate* _instance;
}

- (instancetype)initWithResolveBlock:(RCTPromiseResolveBlock)resolve andRejectBlock:(RCTPromiseRejectBlock)reject {
    self = [super init];
    if (self) {
        resolveBlock = resolve;
        rejectBlock = reject;
        _instance = self;
    }
    return self;
}

- (void)didRejectPromiseWithError:(NSDictionary<NSString *,id> * _Nonnull)error {
    rejectBlock(@"error", (NSString*)[error objectForKey:@"errorMessage"], nil);
    _instance = nil;
}

- (void)didResolvePromiseWithResult:(NSDictionary<NSString *,id> * _Nonnull)result {
    resolveBlock(result);
    _instance = nil;
}

@end
